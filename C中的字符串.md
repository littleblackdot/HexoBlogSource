---
title: C中的字符串
date: 2022-04-23 19:21:03
tags:
---

&nbsp;

<!--more-->

下面的内容根据翁凯老师的C语言慕课的内容总结所得：

字符串：

- 以0结尾的一串字符（结尾字符ascii值为0，’\0’的sacii值为0）
- 0(‘\0’)标志值符串的结束但它不是字符串的一部分
  - 计算字符串长度的时候不包含这个0，但是它是占一字节的空间的，具体问题具体分析。
- 字符串以数组的形式存在，以数组或指针的形式访问
- 特殊的一点，字符串字面量可以用来初始化字符数组

字符串常量：

- 形如”hello”
- “hello”会被编译器变成一个字符数组放在某处(rodata段,只读)，这个数组长度是6，结尾有表示结束的0(‘\0’)

我对字符串的误解是在字符串常量这个点，没有理解C中字符串常量的存储方式

例如，char *p = “hello”;

根据一般的指针思想，我把上面的表达式理解为：”hello“代表了一个地址，并把这个地址赋值给 p这个指针变量，

我会认为 p = “hello” ，字符串”hello“被转换成地址的形式，而p的值就是这个地址，复习C语言的时，在实现strcpy考虑参数类型的时候，我想的函数参数类型。和标准库里的不一样，因为这个冲突，我对自己的字符认知产生了怀疑，然后回头再看了一遍翁凯老师的C语言慕课,有了新的收获。

就如同上面的总结，形如”hello“的值符串常量，会被编译器变成一个数组放在代码段，然后char *p = “hello”,语句的效果是，将”hello“所在数组的首地址赋值给p。

这里也解释了一种情况，我想要输出单个字符的时候需要用到*p，而不是p.这个点用我之前的想法是解释不通的。

总结一句话 ，字符串以数组的形式存在，以数组或指针的形式访问。这个点算是我新的收获了；